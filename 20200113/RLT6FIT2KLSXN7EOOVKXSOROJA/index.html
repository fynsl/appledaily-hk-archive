<html><header><meta charset="utf-8"><title>數據捕捉裂口買港股倘長期未能回補　猶如見底訊號</title></header><body><h1>數據捕捉裂口買港股<br>倘長期未能回補　猶如見底訊號</h1><p>【數碼金魚缸】恒指在去年12月12日和13日形成了兩個大型上升裂口，當時市傳中美貿易談判初步取得成果，使港股悲觀氣氛扭轉。當市場發生重大基本因素改變時，無論是好友或淡友也對後市有比較一致的看法，導致雙方也往相同的方向下注，因此有較大機會持續出現裂口。若出現上升裂口，是否一個對後市重大利好的訊號呢？坊間一般認同這種說法，但筆者對主觀論述有所保留，因此希望用量化數據去驗證「上升裂口代表利好」說法的可靠性。</p><p>要分析圖表上的裂口，首要定義何謂裂口。裂口是指整個交易日的區間也沒有與前一個交易日的區間重叠，在圖表上看似一個斷開的區域，因此稱為裂口。在編寫程式時，一般使用的數據是OHLCV的格式，以五個數字代表一個交易日，分別是開市價（Open）、最高價（High）、最低價（Low）、收市價（Close）及成交量（Volume）。要定義一個上升裂口，只需要測試今天的最低價是否高於昨天的最高價，如果屬實這便是一個裂口了。還可以把兩者之差與一個預設值作比較，例如是0.5%。如果高低相差高於0.5%就是一個闊裂口。有了明確的定義，便可以用程式對裂口做統計。</p><p>存活裂口才有指標性</p><p>筆者使用程式統計，自從2000年以來、恒指4,935個交易日中，總共發現了578個上升裂口及479個下跌裂口。數據顯示，恒指出現裂口的機率大約是21.4%，即是平均每星期出現一次。這個統計數字使筆者感到意外，印象中裂口是沒有那麼常見的。由於筆者是用程式統計的，只要是1點或2點這種微型的裂口也能輕易發現，這些微型裂口可能在之後一兩天內回補了，因此這些裂口往往不容易用肉眼發現。<br><br>有見及此，筆者修改程式，加入一個百分比的下限，裂口最少要達到這個下限的闊度才會被計算在內。筆者使用的參數是0.5%，即只有闊於0.5%的裂口才會被計算在內。使用這一個標準統計結果，恒指自2000年以來、4,935個交易日中，分別出現258個上升裂口及228個下跌裂口，裂口出現的機率約9.8%，大約10天便有機會出現一次（見圖一）。<br><br>另一關於裂口的有用統計是回補的比率。裂口回補是指在裂口出現之後任何交易日的區間與裂口的區間完全重叠，圖表上看似破洞被修補。因此，只要裂口存在時間越久，回補的機率越大。筆者用程式統計，至今20年尚未回補的上升及下跌闊裂口分別只剩下18個及1個，上升及下跌裂口的回補比例竟高達93%及99.6%，真可謂「十個裂口九個補」。<br><br>另一有趣發現是，生存下來的裂口多數也是上升裂口，而且多數位於2009年、2012年及2016年跌市後的底部，這主要是因為股市長遠是緩緩上升趨勢，而且股災後的底部也一個比一個高，因此在底部形成的裂口存活率相對高。相反，如果每次牛市也升破之前的頂部，則所有下跌裂口也將會百分百回補。由此筆者才產生一個想法，如果一個上升裂口在經過一段頗長時間後能存活，有可能是見底訊號。</p><p>有能力避過中期跌浪</p><p>筆者做的回歸測試使用了特定長度的移動視窗（Rolling window），在時間長度以上如有發現闊裂口存活了下來，則會發出訊號。而筆者的策略是假如發出利好訊號便全倉買入並一直持有，重複發出買入訊號不會再加注，直至發出沽出訊號便平倉。這算是長倉為主（Long only）策略的延伸，加入了策略性暫時退場的機制。根據以上規則編寫了交易算法，並用不同的參數去反覆回歸測試。筆者抽出其中一個表現較佳的設定，是使用38天的移動視窗和0.6%的最低裂口闊度，這種設定得出的夏普比率及總回報率均高於被動策略不少（見圖二）。<br><br>仔細分析持倉，交易算法在2018年6月份當恒指仍在30000點以上的時候，因為出現了超過一個月也未能回補的下跌裂口，因此交易算法在當時決定平倉，成功避開了2018年下半年的中期跌浪。目前恒指自從10月以來出現了幾個上升裂口，部份已經存活超過兩個月，因此交易算法在12月初已發出買入的訊號，目前正百分百持倉，可解讀成對後市看好。然而，一旦出現闊下跌裂口，如果在特定時期內未有回補，交易算法則會平倉，解讀成對後市看淡。<br><br>筆者用數據驗證後，對於坊間「上升裂口是利好」說法部份認同。筆者補充，當上升裂口出現後，首先要看它的闊度是否達標，然後要觀察一段時間，它能存活下來沒有回補，才可以算是一個利好訊號。<br><br>以裂口是否回補作為交易算法的訊號，似乎也是有利可圖，在調整了參數設定後的回測結果也能跑贏被動持有指數的組合，也成功避過中期跌浪。如果把裂口策略用於一籃子股票，若發現很多股票也同時出現裂口，或許是更有用的指標，可以更仔細地運用於制定交易策略。礙於篇幅關係，這些進一步的數據實驗留待日後才討論。筆者上述使用的交易算法源碼可在Github連結＊找到，讀者可以測試不同的參數設定，可自行判斷裂口應該存活多久才有參考意義。<br><br>量子雪球<br><br>＊Github： https://github.com/quantumsnowball/AppleDaily20200113 <br><br>作者電郵：mailto:quantum.snowball@gmail.com</p></body></html>